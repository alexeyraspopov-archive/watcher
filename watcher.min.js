!function(a){"use strict";function b(a){var b=e[a];return b||(b=e[a]=new Function("context","locals","with(context){ return "+a+"; }")),b}function c(a,b){return function(){var c=b.indexOf(a);c>-1&&b.splice(c,1)}}function d(a){this.context=a,this.watchers=[],this.checking=!1}var e={};d.prototype.watch=function(a,d){var e=b(a),f={value:e,last:e(this.context),callback:d,expression:a};return f.callback(f.last),this.watchers.push(f),c(f,this.watchers)},d.prototype.digest=function(){var a,b,c,d,e,f=10;if(this.checking)throw new Error("Digest phase is already started");this.checking=!0;do for(a=!0,b=-1,c=this.watchers.length;++b<c;)d=this.watchers[b],e=d.value(this.context),e!==d.last&&(d.callback(e,d.last),d.last=e,a=!1);while(!a&&f--);if(!f)throw new Error("Too much iterations per digest");this.checking=!1},a("Watcher",d)}(function(a,b){"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof window?window[a]=b:module.exports=b});